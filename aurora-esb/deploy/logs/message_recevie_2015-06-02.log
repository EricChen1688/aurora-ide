2015-06-02 11:16:06.191 [aurora.database] [CONFIG] Running batch-apply with data from path /parameter, total 1 records
2015-06-02 11:16:06.193 [aurora.database] [CONFIG] Executing batch-apply on parameter No.0
2015-06-02 11:16:07.223 [uncertain.proc] [CONFIG] [action] DecideStatement
2015-06-02 11:16:07.226 [uncertain.proc] [CONFIG] [action] DecideSqlGenerationMode
2015-06-02 11:16:07.227 [uncertain.proc] [FINE] aurora.database.service.BusinessModelService.onDecideSqlGenerationMode
2015-06-02 11:16:07.227 [uncertain.proc] [CONFIG] [action] CreateOperationSql
2015-06-02 11:16:07.227 [uncertain.proc] [CONFIG] [action] PopulateOperationSql
2015-06-02 11:16:07.227 [uncertain.proc] [FINE] aurora.database.features.WhereClauseCreator.onPopulateOperationSql
2015-06-02 11:16:07.227 [uncertain.proc] [FINE] aurora.database.features.OrderByClauseCreator.onPopulateOperationSql
2015-06-02 11:16:07.228 [uncertain.proc] [CONFIG] [action] CreateSqlRunner
2015-06-02 11:16:07.228 [uncertain.proc] [FINE] aurora.database.service.BusinessModelService.onCreateSqlRunner
2015-06-02 11:16:07.231 [uncertain.proc] [CONFIG] [action] ExecuteDmlStatement
2015-06-02 11:16:07.231 [uncertain.proc] [FINE] aurora.database.service.BusinessModelService.onExecuteDmlStatement
2015-06-02 11:16:07.276 [aurora.database] [CONFIG] 
============= BEGIN [Update] SQL Statement execution dump ============

                BEGIN
                    ? := tm_interface_pkg.save_tm_interface_headers(p_filename 	=> ?,
                    										   				  p_filedate 	=> ?, 
                    										   				  p_batchid 	=> ?, 
                    										   				  p_version 	=> ?, 
                    										   				  p_count 		=> ?, 
                    										   				  p_islast 	=> ?);
                    										   
                    										   
                END;
            
---------------------Binding info---------------------
No.1	Access path:@head_id	Data type of passed value :[null]	Value:null	Output:true	Database Type:null	
No.2	Access path:@filename	Data type of passed value :java.lang.String	Value:CFCar_AUTOFI_LOAN_RESULT_20150202_1.txt	Output:false	Database Type:null	
No.3	Access path:@yyymmdd	Data type of passed value :java.lang.String	Value:20150202	Output:false	Database Type:null	
No.4	Access path:@batchno	Data type of passed value :java.lang.String	Value:1	Output:false	Database Type:null	
No.5	Access path:@version	Data type of passed value :java.lang.String	Value:1.0	Output:false	Database Type:null	
No.6	Access path:@count	Data type of passed value :java.lang.String	Value:1	Output:false	Database Type:null	
No.7	Access path:@isLast	Data type of passed value :java.lang.String	Value:NO	Output:false	Database Type:null	

=============== END [Update] SQL Statement execution dump ============

2015-06-02 11:16:07.280 [aurora.database] [CONFIG] ============ Running model batch update with data from path @current_parameter/datas, total 1 records
2015-06-02 11:16:07.280 [aurora.database] [CONFIG] execute update on record No.0 for model tm_interface_loan_result
2015-06-02 11:16:07.285 [uncertain.proc] [CONFIG] [action] DecideStatement
2015-06-02 11:16:07.289 [uncertain.proc] [CONFIG] [action] DecideSqlGenerationMode
2015-06-02 11:16:07.289 [uncertain.proc] [FINE] aurora.database.service.BusinessModelService.onDecideSqlGenerationMode
2015-06-02 11:16:07.289 [uncertain.proc] [CONFIG] [action] CreateOperationSql
2015-06-02 11:16:07.290 [uncertain.proc] [CONFIG] [action] PopulateOperationSql
2015-06-02 11:16:07.290 [uncertain.proc] [FINE] aurora.database.features.WhereClauseCreator.onPopulateOperationSql
2015-06-02 11:16:07.290 [uncertain.proc] [FINE] aurora.database.features.OrderByClauseCreator.onPopulateOperationSql
2015-06-02 11:16:07.290 [uncertain.proc] [CONFIG] [action] CreateSqlRunner
2015-06-02 11:16:07.290 [uncertain.proc] [FINE] aurora.database.service.BusinessModelService.onCreateSqlRunner
2015-06-02 11:16:07.291 [uncertain.proc] [CONFIG] [action] ExecuteDmlStatement
2015-06-02 11:16:07.291 [uncertain.proc] [FINE] aurora.database.service.BusinessModelService.onExecuteDmlStatement
2015-06-02 11:16:07.304 [aurora.database] [CONFIG] 
============= BEGIN [Update] SQL Statement execution dump ============

            	DECLARE
            	  v_file_status varchar2(50);
                BEGIN
				  v_file_status := tm_interface_pkg.save_loan_result(p_head_id         => ?,
				                                        			 p_applyno         => ?,
				                                        			 p_loandate		   => ?,
				                                        			 p_applyamount 	   => ?);
				                                        				 
				  if v_file_status = 'NO' or ? = 'NO' then
				  	? := 'NO';
				  else 
				    ? := 'YES';
				  end if;
				END;
            
---------------------Binding info---------------------
No.1	Access path:../../@head_id	Data type of passed value :java.lang.Long	Value:464	Output:false	Database Type:null	
No.2	Access path:@applyno	Data type of passed value :java.lang.String	Value:94012014070100039587S	Output:false	Database Type:null	
No.3	Access path:@loandate	Data type of passed value :java.lang.String	Value:2015-09-03 12:12:12	Output:false	Database Type:null	
No.4	Access path:@applyamount	Data type of passed value :java.lang.String	Value:1000000	Output:false	Database Type:null	
No.5	Access path:../../@file_status	Data type of passed value :[null]	Value:null	Output:false	Database Type:null	
No.6	Access path:@file_status	Data type of passed value :[null]	Value:null	Output:true	Database Type:null	
No.7	Access path:@file_status	Data type of passed value :[null]	Value:null	Output:true	Database Type:null	

=============== END [Update] SQL Statement execution dump ============

2015-06-02 11:16:07.305 [aurora.database] [CONFIG] ============ End of batch update for @current_parameter/datas
2015-06-02 11:16:07.308 [uncertain.proc] [INFO] <esb_conext SERVICE_LOGGING_FILE="/Users/shiliyan/git/aurora-ide/aurora-esb/deploy/logs/message_recevie_2015-06-02.log" __configuration__="uncertain.event.Configuration@3fe052a" BusinessModel="aurora.bm.BusinessModel@204d4fed" service_name="message_recevie" SqlGenerationMode="Predefined" _instance.uncertain.logging.ILoggerProvider="uncertain.logging.LoggerProvider@7a0ff4f6" _instance.aurora.service.IService="aurora.service.http.HttpServiceInstance@75d7975d" BusinessModelOperation="Update" SqlString="
            	DECLARE
            	  v_file_status varchar2(50);
                BEGIN
				  v_file_status := tm_interface_pkg.save_loan_result(p_head_id         =&gt; ${../../@head_id},
				                                        			 p_applyno         =&gt; ${@applyno},
				                                        			 p_loandate		   =&gt; ${@loandate},
				                                        			 p_applyamount 	   =&gt; ${@applyamount});
				                                        				 
				  if v_file_status = &apos;NO&apos; or ${../../@file_status} = &apos;NO&apos; then
				  	${@file_status} := &apos;NO&apos;;
				  else 
				    ${@file_status} := &apos;YES&apos;;
				  end if;
				END;
            " __database_service_option="aurora.database.service.ServiceOption@6f31b98" current_parameter="{file_status=YES}" SqlRunner="aurora.database.SqlRunner@4c8b1e8c" __database_all_connection="[com.mchange.v2.c3p0.impl.NewProxyConnection@18f7a67c]" _instance.uncertain.logging.BasicFileHandler="uncertain.logging.BasicFileHandler@49a6ebaf" _instance.java.sql.Connection="com.mchange.v2.c3p0.impl.NewProxyConnection@18f7a67c">
    <parameter file_status="YES">
        <result batchno="1" isLast="NO" orgcode="CFCar" count="1" version="1.0" yyymmdd="20150202" filename="CFCar_AUTOFI_LOAN_RESULT_20150202_1.txt" __parameter_parsed__="true" servicename="AUTOFI_LOAN_RESULT" head_id="464">
            <datas>
                <data applyamount="1000000" loandate="2015-09-03 12:12:12" _status="update" applyno="94012014070100039587S" __parameter_parsed__="true"/>
            </datas>
        </result>
    </parameter>
</esb_conext>

