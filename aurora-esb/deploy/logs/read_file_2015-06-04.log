2015-06-04 15:46:20.679 [aurora.database] [CONFIG] Running batch-apply with data from path /parameter, total 1 records
2015-06-04 15:46:20.680 [aurora.database] [CONFIG] Executing batch-apply on parameter No.0
2015-06-04 15:46:20.690 [uncertain.proc] [CONFIG] [action] DecideStatement
2015-06-04 15:46:20.692 [uncertain.proc] [CONFIG] [action] DecideSqlGenerationMode
2015-06-04 15:46:20.692 [uncertain.proc] [FINE] aurora.database.service.BusinessModelService.onDecideSqlGenerationMode
2015-06-04 15:46:20.692 [uncertain.proc] [CONFIG] [action] CreateOperationSql
2015-06-04 15:46:20.693 [uncertain.proc] [CONFIG] [action] PopulateOperationSql
2015-06-04 15:46:20.693 [uncertain.proc] [FINE] aurora.database.features.WhereClauseCreator.onPopulateOperationSql
2015-06-04 15:46:20.693 [uncertain.proc] [FINE] aurora.database.features.OrderByClauseCreator.onPopulateOperationSql
2015-06-04 15:46:20.693 [uncertain.proc] [CONFIG] [action] CreateSqlRunner
2015-06-04 15:46:20.693 [uncertain.proc] [FINE] aurora.database.service.BusinessModelService.onCreateSqlRunner
2015-06-04 15:46:20.693 [uncertain.proc] [CONFIG] [action] ExecuteDmlStatement
2015-06-04 15:46:20.693 [uncertain.proc] [FINE] aurora.database.service.BusinessModelService.onExecuteDmlStatement
2015-06-04 15:46:20.706 [aurora.database] [CONFIG] 
============= BEGIN [Update] SQL Statement execution dump ============

                BEGIN
                    ? := tm_interface_pkg.insert_tm_interface_headers(p_filename 	=> ?,
                    										   				  p_filedate 	=> ?, 
                    										   				  p_batchid 	=> ?, 
                    										   				  p_version 	=> ?, 
                    										   				  p_count 		=> ?, 
                    										   				  p_islast 	    => ?,
                    										   				  p_servicename => ?);
                    										   
                    										   
                END;
            
---------------------Binding info---------------------
No.1	Access path:@head_id	Data type of passed value :[null]	Value:null	Output:true	Database Type:null	
No.2	Access path:@filename	Data type of passed value :java.lang.String	Value:CFCAR_AUTOFI_PAYEE_INFO_20150604_1.txt	Output:false	Database Type:null	
No.3	Access path:@yyymmdd	Data type of passed value :java.lang.String	Value:20150604	Output:false	Database Type:null	
No.4	Access path:@batchno	Data type of passed value :java.lang.String	Value:1	Output:false	Database Type:null	
No.5	Access path:@version	Data type of passed value :java.lang.String	Value:1.0	Output:false	Database Type:null	
No.6	Access path:@count	Data type of passed value :java.lang.String	Value:1	Output:false	Database Type:null	
No.7	Access path:@isLast	Data type of passed value :java.lang.String	Value:NO	Output:false	Database Type:null	
No.8	Access path:@servicename	Data type of passed value :java.lang.String	Value:AUTOFI_PAYEE_INFO	Output:false	Database Type:null	

=============== END [Update] SQL Statement execution dump ============

2015-06-04 15:46:20.710 [aurora.database] [CONFIG] ============ Running model batch update with data from path @current_parameter/datas, total 1 records
2015-06-04 15:46:20.710 [aurora.database] [CONFIG] execute update on record No.0 for model tm_interface_payee_info
2015-06-04 15:46:20.712 [uncertain.proc] [CONFIG] [action] DecideStatement
2015-06-04 15:46:20.714 [uncertain.proc] [CONFIG] [action] DecideSqlGenerationMode
2015-06-04 15:46:20.715 [uncertain.proc] [FINE] aurora.database.service.BusinessModelService.onDecideSqlGenerationMode
2015-06-04 15:46:20.715 [uncertain.proc] [CONFIG] [action] CreateOperationSql
2015-06-04 15:46:20.715 [uncertain.proc] [CONFIG] [action] PopulateOperationSql
2015-06-04 15:46:20.715 [uncertain.proc] [FINE] aurora.database.features.WhereClauseCreator.onPopulateOperationSql
2015-06-04 15:46:20.715 [uncertain.proc] [FINE] aurora.database.features.OrderByClauseCreator.onPopulateOperationSql
2015-06-04 15:46:20.715 [uncertain.proc] [CONFIG] [action] CreateSqlRunner
2015-06-04 15:46:20.715 [uncertain.proc] [FINE] aurora.database.service.BusinessModelService.onCreateSqlRunner
2015-06-04 15:46:20.716 [uncertain.proc] [CONFIG] [action] ExecuteDmlStatement
2015-06-04 15:46:20.716 [uncertain.proc] [FINE] aurora.database.service.BusinessModelService.onExecuteDmlStatement
2015-06-04 15:46:20.734 [aurora.database] [CONFIG] 
============= BEGIN [Update] SQL Statement execution dump ============

            	DECLARE
            	  v_file_status varchar2(50);
                BEGIN
				  v_file_status := tm_interface_pkg.insert_payee_info(p_head_id  => ?,
				                                        		    p_applyno  => ?,
				                                        			p_name	   => ?,
				                                        			p_address  => ?,
				                                        			p_phone	   => ?);
				                                        				 
				  if v_file_status = 'NO' or ? = 'NO' then
				  	? := 'NO';
				  else 
				    ? := 'YES';
				  end if;
				END;
            
---------------------Binding info---------------------
No.1	Access path:../../@head_id	Data type of passed value :java.lang.Long	Value:772	Output:false	Database Type:null	
No.2	Access path:@applyno	Data type of passed value :java.lang.String	Value:94012014070100039601S	Output:false	Database Type:null	
No.3	Access path:@loandate	Data type of passed value :[null]	Value:null	Output:false	Database Type:null	
No.4	Access path:@applyamount	Data type of passed value :[null]	Value:null	Output:false	Database Type:null	
No.5	Access path:@phone	Data type of passed value :java.lang.String	Value:057199999999	Output:false	Database Type:null	
No.6	Access path:../../@file_status	Data type of passed value :[null]	Value:null	Output:false	Database Type:null	
No.7	Access path:@file_status	Data type of passed value :[null]	Value:null	Output:true	Database Type:null	
No.8	Access path:@file_status	Data type of passed value :[null]	Value:null	Output:true	Database Type:null	

=============== END [Update] SQL Statement execution dump ============

2015-06-04 15:46:20.734 [aurora.database] [CONFIG] ============ End of batch update for @current_parameter/datas
2015-06-04 15:46:20.734 [uncertain.proc] [INFO] <esb_conext SERVICE_LOGGING_FILE="/Users/shiliyan/git/aurora-ide/aurora-esb/deploy/logs/read_file_2015-06-04.log" __configuration__="uncertain.event.Configuration@73a597b3" BusinessModel="aurora.bm.BusinessModel@465ca589" service_name="read_file" SqlGenerationMode="Predefined" _instance.uncertain.logging.ILoggerProvider="uncertain.logging.LoggerProvider@4c0bbc5b" _instance.aurora.service.IService="aurora.service.http.HttpServiceInstance@10a5a55f" BusinessModelOperation="Update" SqlString="
            	DECLARE
            	  v_file_status varchar2(50);
                BEGIN
				  v_file_status := tm_interface_pkg.insert_payee_info(p_head_id  =&gt; ${../../@head_id},
				                                        		    p_applyno  =&gt; ${@applyno},
				                                        			p_name	   =&gt; ${@loandate},
				                                        			p_address  =&gt; ${@applyamount},
				                                        			p_phone	   =&gt; ${@phone});
				                                        				 
				  if v_file_status = &apos;NO&apos; or ${../../@file_status} = &apos;NO&apos; then
				  	${@file_status} := &apos;NO&apos;;
				  else 
				    ${@file_status} := &apos;YES&apos;;
				  end if;
				END;
            " __database_service_option="aurora.database.service.ServiceOption@4f62a0f7" current_parameter="{file_status=YES}" SqlRunner="aurora.database.SqlRunner@6c31347f" __database_all_connection="[com.mchange.v2.c3p0.impl.NewProxyConnection@46208623]" _instance.uncertain.logging.BasicFileHandler="uncertain.logging.BasicFileHandler@7dc9b4c6" _instance.java.sql.Connection="com.mchange.v2.c3p0.impl.NewProxyConnection@46208623">
    <parameter file_status="YES">
        <result batchno="1" isLast="NO" orgcode="CFCAR" count="1" version="1.0" yyymmdd="20150604" filename="CFCAR_AUTOFI_PAYEE_INFO_20150604_1.txt" __parameter_parsed__="true" servicename="AUTOFI_PAYEE_INFO" head_id="772">
            <datas>
                <data address="浙江省杭州市西湖区学院路1999号" _status="update" phone="057199999999" applyno="94012014070100039601S" __parameter_parsed__="true" name="杭州市西湖区别克区经销商"/>
            </datas>
        </result>
    </parameter>
</esb_conext>

