2015-06-03 17:39:51.773 [aurora.database] [CONFIG] Running batch-apply with data from path /parameter, total 1 records
2015-06-03 17:39:51.775 [aurora.database] [CONFIG] Executing batch-apply on parameter No.0
2015-06-03 17:39:51.786 [uncertain.proc] [CONFIG] [action] DecideStatement
2015-06-03 17:39:51.789 [uncertain.proc] [CONFIG] [action] DecideSqlGenerationMode
2015-06-03 17:39:51.789 [uncertain.proc] [FINE] aurora.database.service.BusinessModelService.onDecideSqlGenerationMode
2015-06-03 17:39:51.789 [uncertain.proc] [CONFIG] [action] CreateOperationSql
2015-06-03 17:39:51.790 [uncertain.proc] [CONFIG] [action] PopulateOperationSql
2015-06-03 17:39:51.790 [uncertain.proc] [FINE] aurora.database.features.WhereClauseCreator.onPopulateOperationSql
2015-06-03 17:39:51.790 [uncertain.proc] [FINE] aurora.database.features.OrderByClauseCreator.onPopulateOperationSql
2015-06-03 17:39:51.790 [uncertain.proc] [CONFIG] [action] CreateSqlRunner
2015-06-03 17:39:51.790 [uncertain.proc] [FINE] aurora.database.service.BusinessModelService.onCreateSqlRunner
2015-06-03 17:39:51.790 [uncertain.proc] [CONFIG] [action] ExecuteDmlStatement
2015-06-03 17:39:51.790 [uncertain.proc] [FINE] aurora.database.service.BusinessModelService.onExecuteDmlStatement
2015-06-03 17:39:51.805 [aurora.database] [CONFIG] 
============= BEGIN [Update] SQL Statement execution dump ============

                BEGIN
                    ? := tm_interface_pkg.insert_tm_interface_headers(p_filename 	=> ?,
                    										   				  p_filedate 	=> ?, 
                    										   				  p_batchid 	=> ?, 
                    										   				  p_version 	=> ?, 
                    										   				  p_count 		=> ?, 
                    										   				  p_islast 	    => ?,
                    										   				  p_servicename => ?);
                    										   
                    										   
                END;
            
---------------------Binding info---------------------
No.1	Access path:@head_id	Data type of passed value :[null]	Value:null	Output:true	Database Type:null	
No.2	Access path:@filename	Data type of passed value :java.lang.String	Value:CFCar_AUTOFI_PAYMENT_RESULT_20150202_1.txt	Output:false	Database Type:null	
No.3	Access path:@yyymmdd	Data type of passed value :java.lang.String	Value:20150202	Output:false	Database Type:null	
No.4	Access path:@batchno	Data type of passed value :java.lang.String	Value:1	Output:false	Database Type:null	
No.5	Access path:@version	Data type of passed value :java.lang.String	Value:1.0	Output:false	Database Type:null	
No.6	Access path:@count	Data type of passed value :java.lang.String	Value:2	Output:false	Database Type:null	
No.7	Access path:@isLast	Data type of passed value :java.lang.String	Value:YES	Output:false	Database Type:null	
No.8	Access path:@servicename	Data type of passed value :java.lang.String	Value:AUTOFI_PAYMENT_RESULT	Output:false	Database Type:null	

=============== END [Update] SQL Statement execution dump ============

2015-06-03 17:39:51.808 [aurora.database] [CONFIG] ============ Running model batch update with data from path @current_parameter/datas, total 2 records
2015-06-03 17:39:51.808 [aurora.database] [CONFIG] execute update on record No.0 for model tm_interface_payment_result
2015-06-03 17:39:51.812 [uncertain.proc] [CONFIG] [action] DecideStatement
2015-06-03 17:39:51.817 [uncertain.proc] [CONFIG] [action] DecideSqlGenerationMode
2015-06-03 17:39:51.818 [uncertain.proc] [FINE] aurora.database.service.BusinessModelService.onDecideSqlGenerationMode
2015-06-03 17:39:51.818 [uncertain.proc] [CONFIG] [action] CreateOperationSql
2015-06-03 17:39:51.818 [uncertain.proc] [CONFIG] [action] PopulateOperationSql
2015-06-03 17:39:51.818 [uncertain.proc] [FINE] aurora.database.features.WhereClauseCreator.onPopulateOperationSql
2015-06-03 17:39:51.818 [uncertain.proc] [FINE] aurora.database.features.OrderByClauseCreator.onPopulateOperationSql
2015-06-03 17:39:51.818 [uncertain.proc] [CONFIG] [action] CreateSqlRunner
2015-06-03 17:39:51.818 [uncertain.proc] [FINE] aurora.database.service.BusinessModelService.onCreateSqlRunner
2015-06-03 17:39:51.818 [uncertain.proc] [CONFIG] [action] ExecuteDmlStatement
2015-06-03 17:39:51.818 [uncertain.proc] [FINE] aurora.database.service.BusinessModelService.onExecuteDmlStatement
2015-06-03 17:39:51.831 [aurora.database] [CONFIG] 
============= BEGIN [Update] SQL Statement execution dump ============

            	DECLARE
            	  v_file_status varchar2(50);
                BEGIN
				  v_file_status := tm_interface_pkg.insert_payment_result(p_head_id     	  => ?,
				                                        				p_applyno     	  => ?,
				                                        			    p_termno		  => ?,
				                                        				p_paymentdate 	  => ?,
				                                        				p_amount	   	  => ?);
				                                        				 
				  if v_file_status = 'NO' or ? = 'NO' then
				  	? := 'NO';
				  else 
				    ? := 'YES';
				  end if;
				END;
            
---------------------Binding info---------------------
No.1	Access path:../../@head_id	Data type of passed value :java.lang.Long	Value:538	Output:false	Database Type:null	
No.2	Access path:@applyno	Data type of passed value :java.lang.String	Value:94012014070100039588S	Output:false	Database Type:null	
No.3	Access path:@termno	Data type of passed value :java.lang.String	Value:05	Output:false	Database Type:null	
No.4	Access path:@paymentdate	Data type of passed value :java.lang.String	Value:2015-04-04 12:12:12	Output:false	Database Type:null	
No.5	Access path:@amount	Data type of passed value :java.lang.String	Value:40000	Output:false	Database Type:null	
No.6	Access path:../../@file_status	Data type of passed value :[null]	Value:null	Output:false	Database Type:null	
No.7	Access path:@file_status	Data type of passed value :[null]	Value:null	Output:true	Database Type:null	
No.8	Access path:@file_status	Data type of passed value :[null]	Value:null	Output:true	Database Type:null	

=============== END [Update] SQL Statement execution dump ============

2015-06-03 17:39:51.831 [aurora.database] [CONFIG] execute update on record No.1 for model tm_interface_payment_result
2015-06-03 17:39:51.835 [uncertain.proc] [CONFIG] [action] DecideStatement
2015-06-03 17:39:51.839 [uncertain.proc] [CONFIG] [action] DecideSqlGenerationMode
2015-06-03 17:39:51.839 [uncertain.proc] [FINE] aurora.database.service.BusinessModelService.onDecideSqlGenerationMode
2015-06-03 17:39:51.839 [uncertain.proc] [CONFIG] [action] CreateOperationSql
2015-06-03 17:39:51.839 [uncertain.proc] [CONFIG] [action] PopulateOperationSql
2015-06-03 17:39:51.839 [uncertain.proc] [FINE] aurora.database.features.WhereClauseCreator.onPopulateOperationSql
2015-06-03 17:39:51.839 [uncertain.proc] [FINE] aurora.database.features.OrderByClauseCreator.onPopulateOperationSql
2015-06-03 17:39:51.839 [uncertain.proc] [CONFIG] [action] CreateSqlRunner
2015-06-03 17:39:51.839 [uncertain.proc] [FINE] aurora.database.service.BusinessModelService.onCreateSqlRunner
2015-06-03 17:39:51.839 [uncertain.proc] [CONFIG] [action] ExecuteDmlStatement
2015-06-03 17:39:51.839 [uncertain.proc] [FINE] aurora.database.service.BusinessModelService.onExecuteDmlStatement
2015-06-03 17:39:51.848 [aurora.database] [CONFIG] 
============= BEGIN [Update] SQL Statement execution dump ============

            	DECLARE
            	  v_file_status varchar2(50);
                BEGIN
				  v_file_status := tm_interface_pkg.insert_payment_result(p_head_id     	  => ?,
				                                        				p_applyno     	  => ?,
				                                        			    p_termno		  => ?,
				                                        				p_paymentdate 	  => ?,
				                                        				p_amount	   	  => ?);
				                                        				 
				  if v_file_status = 'NO' or ? = 'NO' then
				  	? := 'NO';
				  else 
				    ? := 'YES';
				  end if;
				END;
            
---------------------Binding info---------------------
No.1	Access path:../../@head_id	Data type of passed value :java.lang.Long	Value:538	Output:false	Database Type:null	
No.2	Access path:@applyno	Data type of passed value :java.lang.String	Value:94012014070100039589S	Output:false	Database Type:null	
No.3	Access path:@termno	Data type of passed value :java.lang.String	Value:06	Output:false	Database Type:null	
No.4	Access path:@paymentdate	Data type of passed value :java.lang.String	Value:2015-04-04 12:12:12	Output:false	Database Type:null	
No.5	Access path:@amount	Data type of passed value :java.lang.String	Value:41000	Output:false	Database Type:null	
No.6	Access path:../../@file_status	Data type of passed value :[null]	Value:null	Output:false	Database Type:null	
No.7	Access path:@file_status	Data type of passed value :[null]	Value:null	Output:true	Database Type:null	
No.8	Access path:@file_status	Data type of passed value :[null]	Value:null	Output:true	Database Type:null	

=============== END [Update] SQL Statement execution dump ============

2015-06-03 17:39:51.848 [aurora.database] [CONFIG] ============ End of batch update for @current_parameter/datas
2015-06-03 17:39:51.849 [uncertain.proc] [INFO] <esb_conext SERVICE_LOGGING_FILE="/Users/shiliyan/git/aurora-ide/aurora-esb/deploy/logs/read_file_2015-06-03.log" __configuration__="uncertain.event.Configuration@2ab82613" BusinessModel="aurora.bm.BusinessModel@51c7f16a" service_name="read_file" SqlGenerationMode="Predefined" _instance.uncertain.logging.ILoggerProvider="uncertain.logging.LoggerProvider@2ec8dc56" _instance.aurora.service.IService="aurora.service.http.HttpServiceInstance@4ffc485" BusinessModelOperation="Update" SqlString="
            	DECLARE
            	  v_file_status varchar2(50);
                BEGIN
				  v_file_status := tm_interface_pkg.insert_payment_result(p_head_id     	  =&gt; ${../../@head_id},
				                                        				p_applyno     	  =&gt; ${@applyno},
				                                        			    p_termno		  =&gt; ${@termno},
				                                        				p_paymentdate 	  =&gt; ${@paymentdate},
				                                        				p_amount	   	  =&gt; ${@amount});
				                                        				 
				  if v_file_status = &apos;NO&apos; or ${../../@file_status} = &apos;NO&apos; then
				  	${@file_status} := &apos;NO&apos;;
				  else 
				    ${@file_status} := &apos;YES&apos;;
				  end if;
				END;
            " __database_service_option="aurora.database.service.ServiceOption@6f9ce2b7" current_parameter="{file_status=YES}" SqlRunner="aurora.database.SqlRunner@1be028f" __database_all_connection="[com.mchange.v2.c3p0.impl.NewProxyConnection@7109cf8e]" _instance.uncertain.logging.BasicFileHandler="uncertain.logging.BasicFileHandler@697c4482" _instance.java.sql.Connection="com.mchange.v2.c3p0.impl.NewProxyConnection@7109cf8e">
    <parameter file_status="YES">
        <result batchno="1" isLast="YES" orgcode="CFCar" count="2" version="1.0" yyymmdd="20150202" filename="CFCar_AUTOFI_PAYMENT_RESULT_20150202_1.txt" __parameter_parsed__="true" servicename="AUTOFI_PAYMENT_RESULT" head_id="538">
            <datas>
                <data paymentdate="2015-04-04 12:12:12" amount="40000" _status="update" applyno="94012014070100039588S" __parameter_parsed__="true" termno="05"/>
                <data paymentdate="2015-04-04 12:12:12" amount="41000" _status="update" applyno="94012014070100039589S" __parameter_parsed__="true" termno="06"/>
            </datas>
        </result>
    </parameter>
</esb_conext>

